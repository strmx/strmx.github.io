/// <reference path="../../typings/Interfaces.d.ts" />
define(["require", "exports", '../utils/Randomizer', '../map/CavePatternGenerator', '../map/PatternHelper'], function (require, exports, Randomizer, CavePatternGenerator, PatternHelper) {
    "use strict";
    describe("PatternHelper", function () {
        var GENERATOR_OPTIONS = {
            n: 32,
            m: 32,
            wallChance: .4,
            stepCount: 2,
            nextReal: Randomizer.generateNextRealFunction(13),
            birthLimit: 4,
            deathLimit: 3,
        };
        // test pattern
        // test pattern should be generated once because of seeded randomizer
        var initialPattern = PatternHelper.createFilled(GENERATOR_OPTIONS.n, GENERATOR_OPTIONS.m, 0);
        PatternHelper.fillUniform(initialPattern, .4, GENERATOR_OPTIONS.nextReal, 1);
        for (var i = 0; i < 2; i++) {
            initialPattern = CavePatternGenerator.applyCAStep(initialPattern, GENERATOR_OPTIONS.birthLimit, GENERATOR_OPTIONS.deathLimit);
        }
        var pattern = null;
        beforeEach(function () {
            pattern = PatternHelper.clone(initialPattern);
        });
        it("clones", function () {
            var dummyPattern = [[0, 0, 0], [1, 2, 3], [4, 5, 6], [1, 2, 1]];
            var clonePattern = PatternHelper.clone(dummyPattern);
            assert.deepEqual(dummyPattern, clonePattern, 'pattern are equal');
            assert.notEqual(dummyPattern[0], clonePattern[0], 'arrays are different objects');
        });
        it("stringify and parse", function () {
            var dummyPattern = [[0, 0, 0], [1, 2, 3], [4, 5, 6], [1, 2, 1]];
            var patternText = PatternHelper.stringify(dummyPattern);
            var parsedPattern = PatternHelper.parse(PatternHelper.stringify(dummyPattern));
            assert.deepEqual(dummyPattern, parsedPattern, 'pattern are equal');
            assert.notEqual(dummyPattern[0], parsedPattern[0], 'arrays are different objects');
        });
        var DUMMY_PATTERN = "\u2588\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\n\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\n\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\n\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\n\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\n\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2588\n\u2588\u2588\u2588\u2591\u2591\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2588\n\u2588\u2588\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2591\u2591\u2588\n\u2588\u2588\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2591\u2591\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2588\u2588\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2588\n\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\n\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\n\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\n\u2588\u2591\u2591\u2591\u2588\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\n\u2588\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2588\u2588\u2588\n\u2588\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588";
        it("generates random cave pattern (raw)", function () {
            console.log(PatternHelper.stringify(pattern));
            assert.equal(PatternHelper.stringify(pattern), DUMMY_PATTERN);
        });
        var BIGGEST_AREA_PATTERN = "\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2588\u2588\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588";
        it("finds biggest area", function () {
            PatternHelper.removeSmallOpenAreas(pattern);
            console.log(PatternHelper.stringify(pattern));
            assert.equal(PatternHelper.stringify(pattern), BIGGEST_AREA_PATTERN);
        });
        /*
        ███████████████░░░░░░░█░░░██████
        ██████████████░1░░░░░░░░░░░░░███
        ██████████████░░░░░░░░░░░░░░░░░█
        ███████████████░░░░4░░░░░░░░░2░░
        ████████████████░░░░░░░░4░░░░░░█
        ████████████████░░░░░░░░░░░░░░██
        ████████████░░░░░░░░░░░░░░░░2░██
        ███████████░1░2░░3░░░░░░░░░░░░░█
        ███████████░░░░░░░░░1░░░░░1░██░░
        ████████░░░░░░░░░░░░░███░1░█████
        ████████░░░░░3░░░███████░░██████
        ███████░░2░░░░░░████░░░░░░██████
        ███████░░░░░░░░░████░░░░2░░█████
        ███████░1░██░░2░██████░░░░░█████
        ███████░░███░░░░░██████░░1░█████
        ████████░░██░░░░░░██████░░██████
        █████████░░█░░░░░░██████░███████
        ███████████░░░3░░░██░░██░███████
        ███████████░░░░░░░░░1░██░░░█████
        ██████████░1░░░░░2░░░░███░░░░░░█
        █████████░1░██░2░░░2░████░░░░░░░
        █████████░░░██░░░░░░░░██░░░░3░░░
        █████████░░██░░████░░░░░░2░░░░░░
        █████████████░░████░░░░░░░░░░░░█
        █████████████░░░██░░░3░░░██░░███
        ████████████░░2░░█░░░░░░░███████
        ██████████░░░░░░1░░░░░░░████████
        █████████░1░░░░░░░░2░░░█████████
        █████████░░░░3░░██░░░███████████
        ██████████░░░░░░██░░████████████
        ███████████░░░░░░░░█████████████
        █████████████░░░░░██████████████*/
        var START_POINTS = [{
                "x": 24,
                "y": 4,
                "distance": 4.47213595499958
            }, {
                "x": 19,
                "y": 3,
                "distance": 4.242640687119285
            }, {
                "x": 21,
                "y": 24,
                "distance": 3.1622776601683795
            }, {
                "x": 14,
                "y": 17,
                "distance": 3.1622776601683795
            }, {
                "x": 13,
                "y": 10,
                "distance": 3.1622776601683795
            }, {
                "x": 28,
                "y": 21,
                "distance": 3
            }, {
                "x": 13,
                "y": 28,
                "distance": 3
            }, {
                "x": 17,
                "y": 7,
                "distance": 2.8284271247461903
            }, {
                "x": 19,
                "y": 27,
                "distance": 2.23606797749979
            }, {
                "x": 14,
                "y": 25,
                "distance": 2.23606797749979
            }, {
                "x": 17,
                "y": 19,
                "distance": 2.23606797749979
            }, {
                "x": 24,
                "y": 12,
                "distance": 2.23606797749979
            }, {
                "x": 9,
                "y": 11,
                "distance": 2.23606797749979
            }, {
                "x": 14,
                "y": 13,
                "distance": 2
            }, {
                "x": 14,
                "y": 7,
                "distance": 2
            }, {
                "x": 19,
                "y": 20,
                "distance": 2
            }, {
                "x": 15,
                "y": 20,
                "distance": 2
            }, {
                "x": 25,
                "y": 22,
                "distance": 2
            }, {
                "x": 28,
                "y": 6,
                "distance": 2
            }, {
                "x": 29,
                "y": 3,
                "distance": 2
            }, {
                "x": 20,
                "y": 8,
                "distance": 1.4142135623730951
            }, {
                "x": 20,
                "y": 18,
                "distance": 1.4142135623730951
            }, {
                "x": 11,
                "y": 19,
                "distance": 1.4142135623730951
            }, {
                "x": 25,
                "y": 9,
                "distance": 1.4142135623730951
            }, {
                "x": 25,
                "y": 14,
                "distance": 1.4142135623730951
            }, {
                "x": 8,
                "y": 13,
                "distance": 1.4142135623730951
            }, {
                "x": 26,
                "y": 8,
                "distance": 1.4142135623730951
            }, {
                "x": 10,
                "y": 20,
                "distance": 1.4142135623730951
            }, {
                "x": 12,
                "y": 7,
                "distance": 1.4142135623730951
            }, {
                "x": 15,
                "y": 1,
                "distance": 1.4142135623730951
            }, {
                "x": 16,
                "y": 26,
                "distance": 1.4142135623730951
            }, {
                "x": 10,
                "y": 27,
                "distance": 1.4142135623730951
            }];
        it("generate start points", function () {
            PatternHelper.removeSmallOpenAreas(pattern);
            var bypass = PatternHelper.generateBypass(pattern);
            var positions = PatternHelper.collectFreeAroundPositions(pattern, bypass);
            assert.deepEqual(positions, START_POINTS);
        });
        var BIG_RECT_AREAS = "999999999555551\u2591\u2591\u2591\u2591\u2591\u2591\u25911\u2591\u2591\u2591111221\n99999999955555\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591221\n99999999955555\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u25911\n999999999555551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\n9999999995555522\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u25911\n9999999992211122\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u259122\n999999999221\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u259122\n99999999922\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u25911\n99999999922\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u259111\u2591\u2591\n77777771\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591221\u2591\u2591\u259155555\n77777771\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u25913331221\u2591\u2591155555\n7777777\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u25911333\u2591\u2591\u2591\u2591\u2591\u2591155555\n7777777\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u25911333\u2591\u2591\u2591\u2591\u2591\u2591\u259155555\n7777777\u2591\u2591\u259122\u2591\u2591\u2591\u2591114444\u2591\u2591\u2591\u2591\u259155555\n7777777\u2591\u2591122\u2591\u2591\u2591\u2591\u2591144441\u2591\u2591\u2591\u259155555\n77777771\u2591\u259111\u2591\u2591\u2591\u2591\u2591\u2591444422\u2591\u2591155555\n999999999\u2591\u25911\u2591\u2591\u2591\u2591\u2591\u2591444422\u25912255555\n99999999922\u2591\u2591\u2591\u2591\u2591\u2591\u259111\u2591\u259122\u25912255555\n99999999922\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u259122\u2591\u2591\u259155555\n9999999991\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591221\u2591\u2591\u2591\u2591\u2591\u25911\n999999999\u2591\u2591\u259122\u2591\u2591\u2591\u2591\u2591\u2591\u25911221\u2591\u2591\u2591\u2591\u2591\u2591\u2591\n999999999\u2591\u2591\u259122\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u259111\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\n999999999\u2591\u259111\u2591\u25912222\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\n9999999993331\u2591\u25912222\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u25911\n9999999993331\u2591\u2591\u259111\u2591\u2591\u2591\u2591\u2591\u2591\u259111\u2591\u2591111\n777777722333\u2591\u2591\u2591\u2591\u25911\u2591\u2591\u2591\u2591\u2591\u2591\u25917777777\n7777777221\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u259117777777\n777777722\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591117777777\n777777722\u2591\u2591\u2591\u2591\u2591\u2591\u259122\u2591\u2591\u259144447777777\n7777777333\u2591\u2591\u2591\u2591\u2591\u259122\u2591\u2591144447777777\n77777773331\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u25912244447777777\n7777777333111\u2591\u2591\u2591\u2591\u259112244447777777";
        it('calculateRectBlocks', function () {
            PatternHelper.removeSmallOpenAreas(pattern);
            var rectAreas = PatternHelper.calculateRectBlocks(pattern, 1);
            // mark on map
            rectAreas.forEach(function (rect) {
                // if (rect.w >= 1) {
                for (var i = 0; i < rect.w; i++) {
                    for (var j = 0; j < rect.h; j++) {
                        pattern[rect.x + i][rect.y + j] = -rect.w;
                    }
                }
                // }
            });
            console.log(PatternHelper.stringify(pattern, true));
            assert.equal(PatternHelper.stringify(pattern, true), BIG_RECT_AREAS);
        });
    });
});
